<!DOCTYPE html><html lang="en-gb"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>MongoDB backups op Amazon S3 met S3CMD - iTheo.Tech</title><meta name="description" content="[Sorry! Dutch only] In mijn laatste post heb ik geschreven over de installatie, configuratie van S3CMD en hoe je eenvoudig backups kan maken van je MySQL databases en web files. In deze post leg ik uit hoe je heel eenvoudig een backup kan maken van&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://itheo.tech/mongodb-backups-op-amazon-s3-met-s3cmd.html"><link rel="alternate" type="application/atom+xml" href="https://itheo.tech/feed.xml"><link rel="alternate" type="application/json" href="https://itheo.tech/feed.json"><meta property="og:title" content="MongoDB backups op Amazon S3 met S3CMD"><meta property="og:image" content="https://itheo.tech/media/posts/17/rwCsX8tnt.jpeg"><meta property="og:image:width" content="1600"><meta property="og:image:height" content="1067"><meta property="og:site_name" content="iTheo.Tech"><meta property="og:description" content="[Sorry! Dutch only] In mijn laatste post heb ik geschreven over de installatie, configuratie van S3CMD en hoe je eenvoudig backups kan maken van je MySQL databases en web files. In deze post leg ik uit hoe je heel eenvoudig een backup kan maken van&hellip;"><meta property="og:url" content="https://itheo.tech/mongodb-backups-op-amazon-s3-met-s3cmd.html"><meta property="og:type" content="article"><link rel="stylesheet" href="https://itheo.tech/assets/css/style.css?v=6fbb1e8931a5afe843374fd67c192c86"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://itheo.tech/mongodb-backups-op-amazon-s3-met-s3cmd.html"},"headline":"MongoDB backups op Amazon S3 met S3CMD","datePublished":"2015-01-30T21:25","dateModified":"2024-06-01T19:42","image":{"@type":"ImageObject","url":"https://itheo.tech/media/posts/17/rwCsX8tnt.jpeg","height":1067,"width":1600},"description":"[Sorry! Dutch only] In mijn laatste post heb ik geschreven over de installatie, configuratie van S3CMD en hoe je eenvoudig backups kan maken van je MySQL databases en web files. In deze post leg ik uit hoe je heel eenvoudig een backup kan maken van&hellip;","author":{"@type":"Person","name":"Theo van der Sluijs","url":"https://itheo.tech/authors/theo-van-der-sluijs/"},"publisher":{"@type":"Organization","name":"Theo van der Sluijs","logo":{"@type":"ImageObject","url":"https://itheo.tech/media/website/itheo.tech-500x125-logo.png","height":125,"width":500}}}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript></head><body><div class="site-container"><header class="top" id="js-header"><a class="logo" href="https://itheo.tech/"><img src="https://itheo.tech/media/website/itheo.tech-500x125-logo.png" alt="iTheo.Tech" width="500" height="125"></a><div class="search"><div class="search__overlay js-search-overlay"><div class="search__overlay-inner"><button class="search__close js-search-close" aria-label="Close">Close</button></div></div><button class="search__btn js-search-btn" aria-label="Search"><svg role="presentation" focusable="false"><use xlink:href="https://itheo.tech/assets/svg/svg-map.svg#search"/></svg></button></div></header><main><article class="post"><div class="hero"><figure class="hero__image hero__image--overlay"><img src="https://itheo.tech/media/posts/17/rwCsX8tnt.jpeg" srcset="https://itheo.tech/media/posts/17/responsive/rwCsX8tnt-xs.webp 300w, https://itheo.tech/media/posts/17/responsive/rwCsX8tnt-sm.webp 480w, https://itheo.tech/media/posts/17/responsive/rwCsX8tnt-md.webp 768w, https://itheo.tech/media/posts/17/responsive/rwCsX8tnt-lg.webp 1024w, https://itheo.tech/media/posts/17/responsive/rwCsX8tnt-xl.webp 1360w, https://itheo.tech/media/posts/17/responsive/rwCsX8tnt-2xl.webp 1600w" sizes="(max-width: 1600px) 100vw, 1600px" loading="eager" height="1067" width="1600" alt=""></figure><header class="hero__content"><div class="wrapper"><div class="post__meta"><time datetime="2015-01-30T21:25">January 30, 2015</time></div><h1>MongoDB backups op Amazon S3 met S3CMD</h1><div class="post__meta post__meta--author"><img src="https://itheo.tech/media/website/64.png" loading="eager" height="512" width="512" class="post__author-thumb" alt="Theo van der Sluijs"> <a href="https://itheo.tech/authors/theo-van-der-sluijs/" class="feed__author">Theo van der Sluijs</a></div></div></header></div><div class="wrapper post__entry"><p>[Sorry! Dutch only]</p><p>In mijn laatste post heb ik geschreven over de installatie, configuratie van S3CMD en hoe je eenvoudig backups kan maken van je MySQL databases en web files.</p><p>In deze post leg ik uit hoe je heel eenvoudig een backup kan maken van je MongoDb op je Amazon s3 Bucket met S3CMD.</p><p>Op veel van mijn sites draai ik MongoDB dus ik vond het tijd dat ik maar eens een backup ging maken van deze databases op een andere cloud-omgeving dan mijn <a href="https://www.digitalocean.com/?refcode=38909179d2dc">DigitalOcean</a> server. Ook maar op een Amazon S3 Bucket.</p><p>Met onderstaand bash script kan je via een cronjob kinderlijk eenvoudig backups maken van je MongoDb. Het is eenvoudig aan te passen naar eigen wensen.</p><p>Via deze weg is je MongoDB ook weer netjes gebackuped op een veilige Cloud omgeving.</p><pre><code class="lang-bash"><span class="hljs-meta">#!/bin/bash</span><restore-line-break><span class="hljs-comment">#add right params at [PARAM]</span><restore-line-break><span class="hljs-built_in">export</span> LC_ALL=C<restore-line-break><restore-line-break>BAK=<span class="hljs-string">"/opt/backup"</span><restore-line-break><restore-line-break>TIMESTAMP=`date +%F-%H%M`<restore-line-break>S3_BUCKET_NAME=[BUCKET_NAME]<restore-line-break>S3_BUCKET_PATH=[BUCKET_PATH]<restore-line-break><restore-line-break>MONGO_DBNAME=[MONGO_DBNAME]<restore-line-break><restore-line-break><span class="hljs-comment">#creating mongo backup</span><restore-line-break>/usr/bin/mongodump --port 27017 --db <span class="hljs-variable">$MONGO_DBNAME</span> --out <span class="hljs-variable">$BAK</span>/<span class="hljs-variable">$MONGO_DBNAME</span>-<span class="hljs-variable">$TIMESTAMP</span><restore-line-break><restore-line-break><span class="hljs-comment">#tar the backupsfiles</span><restore-line-break>tar cf <span class="hljs-variable">$BAK</span>/<span class="hljs-variable">$MONGO_DBNAME</span>-<span class="hljs-variable">$TIMESTAMP</span>.tar <span class="hljs-variable">$BAK</span>/<span class="hljs-variable">$MONGO_DBNAME</span>-<span class="hljs-variable">$TIMESTAMP</span><restore-line-break><restore-line-break><span class="hljs-comment">#put the files on S3</span><restore-line-break>s3cmd put <span class="hljs-variable">$BAK</span>/<span class="hljs-variable">$MONGO_DBNAME</span>-<span class="hljs-variable">$TIMESTAMP</span>.tar s3://<span class="hljs-variable">$S3_BUCKET_NAME</span>/<span class="hljs-variable">$S3_BUCKET_PATH</span>/<span class="hljs-variable">$MONGO_DBNAME</span>-<span class="hljs-variable">$TIMESTAMP</span>.tar<restore-line-break><restore-line-break><span class="hljs-comment">#delete 2 days old backups on your server</span><restore-line-break>find <span class="hljs-variable">$BAK</span>/*.tar -mtime +2 -<span class="hljs-built_in">exec</span> rm {} ;<restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></code></pre></div><footer class="wrapper post__footer"><p class="post__last-updated">This article was updated on June 1, 2024</p><div class="post__share"></div><div class="post__bio bio"><img src="https://itheo.tech/media/website/64.png" loading="lazy" height="512" width="512" class="bio__avatar" alt="Theo van der Sluijs"><div><h3 class="bio__name"><a href="https://itheo.tech/authors/theo-van-der-sluijs/" rel="author">Theo van der Sluijs</a></h3></div></div></footer></article><nav class="post__nav"><div class="post__nav-inner"><div class="post__nav-prev"><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="https://itheo.tech/assets/svg/svg-map.svg#arrow-prev"/></svg> <a href="https://itheo.tech/installation-and-configuration-s3cmd-centos.html" class="post__nav-link" rel="prev"><span>Previous</span> Installation and configuration S3CMD Centos</a></div><div class="post__nav-next"><a href="https://itheo.tech/url-shortener-with-php-and-mongodb-script.html" class="post__nav-link" rel="next"><span>Next</span> Url shortener with PHP and MongoDB script </a><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="https://itheo.tech/assets/svg/svg-map.svg#arrow-next"/></svg></div></div></nav><div class="post__related related"><div class="wrapper"><h2 class="h5 related__title">You should also read:</h2><article class="related__item"><div class="feed__meta"><time datetime="2015-01-09T16:58" class="feed__date">January 9, 2015</time></div><h3 class="h1"><a href="https://itheo.tech/mongodb-aggregate-match-and-or-in-php.html">Mongodb aggregate $match, $and, $or in PHP</a></h3></article><article class="related__item"><div class="feed__meta"><time datetime="2015-01-27T18:43" class="feed__date">January 27, 2015</time></div><h3 class="h1"><a href="https://itheo.tech/installation-and-configuration-s3cmd-centos.html">Installation and configuration S3CMD Centos</a></h3></article><article class="related__item"><div class="feed__meta"><time datetime="2015-02-05T19:42" class="feed__date">February 5, 2015</time></div><h3 class="h1"><a href="https://itheo.tech/url-shortener-with-php-and-mongodb-script.html">Url shortener with PHP and MongoDB script</a></h3></article></div></div></main><footer class="footer"><div class="footer__copyright"><p>iTheo.Tech</p></div><button onclick="backToTopFunction()" id="backToTop" class="footer__bttop" aria-label="Back to top" title="Back to top"><svg><use xlink:href="https://itheo.tech/assets/svg/svg-map.svg#toparrow"/></svg></button></footer></div><script defer="defer" src="https://itheo.tech/assets/js/scripts.min.js?v=f47c11534595205f20935f0db2a62a85"></script><script>window.publiiThemeMenuConfig={mobileMenuMode:'sidebar',animationSpeed:300,submenuWidth: 'auto',doubleClickTime:500,mobileMenuExpandableSubmenus:true,relatedContainerForOverlayMenuSelector:'.top'};</script><script>var images = document.querySelectorAll('img[loading]');
        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script></body></html>