<!DOCTYPE html><html lang="en-gb"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Read P1 port smart meter with Raspberry and Python - iTheo.Tech</title><meta name="description" content="Example script for reading out the smart energy meter with Python and a Raspberry Pi. This simple guide will help you read your home energie smart meter. Nowadays many houses in the Netherlands have a so-called Smart Energy meter. With this meter, energy companies can&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://itheo.tech/read-p1-port-smart-meter-with-raspberry-and-python.html"><link rel="alternate" type="application/atom+xml" href="https://itheo.tech/feed.xml"><link rel="alternate" type="application/json" href="https://itheo.tech/feed.json"><meta property="og:title" content="Read P1 port smart meter with Raspberry and Python"><meta property="og:image" content="https://itheo.tech/media/posts/24/b__16LAIF.jpeg"><meta property="og:image:width" content="2000"><meta property="og:image:height" content="1125"><meta property="og:site_name" content="iTheo.Tech"><meta property="og:description" content="Example script for reading out the smart energy meter with Python and a Raspberry Pi. This simple guide will help you read your home energie smart meter. Nowadays many houses in the Netherlands have a so-called Smart Energy meter. With this meter, energy companies can&hellip;"><meta property="og:url" content="https://itheo.tech/read-p1-port-smart-meter-with-raspberry-and-python.html"><meta property="og:type" content="article"><link rel="stylesheet" href="https://itheo.tech/assets/css/style.css?v=6fbb1e8931a5afe843374fd67c192c86"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://itheo.tech/read-p1-port-smart-meter-with-raspberry-and-python.html"},"headline":"Read P1 port smart meter with Raspberry and Python","datePublished":"2020-10-13T08:12","dateModified":"2024-06-01T19:42","image":{"@type":"ImageObject","url":"https://itheo.tech/media/posts/24/b__16LAIF.jpeg","height":1125,"width":2000},"description":"Example script for reading out the smart energy meter with Python and a Raspberry Pi. This simple guide will help you read your home energie smart meter. Nowadays many houses in the Netherlands have a so-called Smart Energy meter. With this meter, energy companies can&hellip;","author":{"@type":"Person","name":"Theo van der Sluijs","url":"https://itheo.tech/authors/theo-van-der-sluijs/"},"publisher":{"@type":"Organization","name":"Theo van der Sluijs","logo":{"@type":"ImageObject","url":"https://itheo.tech/media/website/itheo.tech-500x125-logo.png","height":125,"width":500}}}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript></head><body><div class="site-container"><header class="top" id="js-header"><a class="logo" href="https://itheo.tech/"><img src="https://itheo.tech/media/website/itheo.tech-500x125-logo.png" alt="iTheo.Tech" width="500" height="125"></a><div class="search"><div class="search__overlay js-search-overlay"><div class="search__overlay-inner"><button class="search__close js-search-close" aria-label="Close">Close</button></div></div><button class="search__btn js-search-btn" aria-label="Search"><svg role="presentation" focusable="false"><use xlink:href="https://itheo.tech/assets/svg/svg-map.svg#search"/></svg></button></div></header><main><article class="post"><div class="hero"><figure class="hero__image hero__image--overlay"><img src="https://itheo.tech/media/posts/24/b__16LAIF.jpeg" srcset="https://itheo.tech/media/posts/24/responsive/b__16LAIF-xs.webp 300w, https://itheo.tech/media/posts/24/responsive/b__16LAIF-sm.webp 480w, https://itheo.tech/media/posts/24/responsive/b__16LAIF-md.webp 768w, https://itheo.tech/media/posts/24/responsive/b__16LAIF-lg.webp 1024w, https://itheo.tech/media/posts/24/responsive/b__16LAIF-xl.webp 1360w, https://itheo.tech/media/posts/24/responsive/b__16LAIF-2xl.webp 1600w" sizes="(max-width: 1600px) 100vw, 1600px" loading="eager" height="1125" width="2000" alt=""></figure><header class="hero__content"><div class="wrapper"><div class="post__meta"><time datetime="2020-10-13T08:12">October 13, 2020</time></div><h1>Read P1 port smart meter with Raspberry and Python</h1><div class="post__meta post__meta--author"><img src="https://itheo.tech/media/website/64.png" loading="eager" height="512" width="512" class="post__author-thumb" alt="Theo van der Sluijs"> <a href="https://itheo.tech/authors/theo-van-der-sluijs/" class="feed__author">Theo van der Sluijs</a></div></div></header></div><div class="wrapper post__entry"><p>Example script for reading out the smart energy meter with Python and a Raspberry Pi. This simple guide will help you read your home energie smart meter.</p><p>Nowadays many houses in the Netherlands have a so-called Smart Energy meter. With this meter, energy companies can read your meter without anyone having to come by. But I want to be able to read that data myself with Python.</p><p>Data, it’s gold for some companies. But I can’t stand the fact that, for example, my energy company has data from me and I don’t.</p><p>So I started tinkering with a Raspberry and Python code to read the data from a smart meter myself.</p><h2 id="heading-building-your-own-python-smart-meter-setup">Building your own python smart meter setup</h2><p>This DIY project is actually very simple and you only need a few things to read your meter yourself.</p><p>Mind you, you need to be a bit tech-savvy to build this. You don’t need a soldering iron just some linux installation and Python code experience.</p><p>The necessities for building this yourself are:</p><p>1 <a target="_blank" href="https://amzn.to/3kTWeXj" rel="noopener">Raspberry Pi</a> from 40 bucks to 100 with case and cables <em>(affiliate link)</em><br>1 <a target="_blank" href="https://amzn.to/3oR9NsK" rel="noopener">P1 cable</a> 16 bucks <em>(affiliate link)</em></p><p>and some Python code.</p><p>I assume that you have a Raspberry and have bought a P1 cable. I also assume that you have installed your raspberry with the Rasp OS.</p><p><strong>Raspberry Pi OS</strong> (previously called Raspbian) is the Foundation’s official supported operating system. You can install it with <a target="_blank" href="https://www.raspberrypi.org/downloads/noobs/" rel="noopener">NOOBS</a> or download the image below and follow our <a target="_blank" href="https://www.raspberrypi.org/documentation/installation/installing-images/README.md" rel="noopener">installation guide</a>.</p><p>You can always use any linux OS you want or that you have. You do however need Python 3.8 minimum. Your system comes with 2.7.x and 3.5.x so you better upgrade. <a target="_blank" href="https://itheo.tech/install-python-3-8-on-a-raspberry-pi" rel="noopener">Read this</a> if you want to upgrade to Python 3.8.x</p><h2 id="heading-setting-up-the-p1-cable-on-raspberry-pi">Setting up the P1 cable on Raspberry PI</h2><p>P1, what is a P1 cable? Well it goes into the P1 port The P1 port is a serial port on your digital electricity meter, into which you can plug an RJ-11 (Registered Jack) plug (known from the telephone connections) to read the meter readings and consumption. It is not possible to send data to the port!</p><p>However, this serial port is not standard, despite the fact that it works at UART TTL level, the logical values ​​are reversed: 1 = 0 and 0 = 1, this can be solved by software, but does not always give the desired result, solution is to do this hardware-wise, for example with a chip to be placed in between. A MAX232 or 7404 is often used.</p><p>According to the specification, the port can handle max. 15v, so a real RS232 signal (+ 12v) from a “real” com port must be able to handle it.</p><p>The plug that has to be put in the P1 port is the type RJ-11, 4 or 6-pin (known from the telephone connections). The P1 cable has this RJ-11 type of plug on one side and USB on the other side.</p><p>So.. simple right, you put one end (RJ-11) of the cable in the smart meter.</p><p><img loading="lazy" src="https://itheo.tech/media/posts/24/aTVUqvPWT.jpeg" alt="Raspberry PI read-out Smart Meter" sizes="100vw" srcset="https://itheo.tech/media/posts/24/responsive/aTVUqvPWT-xs.webp 300w, https://itheo.tech/media/posts/24/responsive/aTVUqvPWT-sm.webp 480w, https://itheo.tech/media/posts/24/responsive/aTVUqvPWT-md.webp 768w, https://itheo.tech/media/posts/24/responsive/aTVUqvPWT-lg.webp 1024w, https://itheo.tech/media/posts/24/responsive/aTVUqvPWT-xl.webp 1360w, https://itheo.tech/media/posts/24/responsive/aTVUqvPWT-2xl.webp 1600w">The black cable looks like an land line phone plug</p><p>And the other end you put in one of the Raspberry USB ports.</p><p><img loading="lazy" src="https://itheo.tech/media/posts/24/AOY15ZJcQ.jpeg" alt="Read P1 port smart meter with Raspberry and Python" sizes="100vw" srcset="https://itheo.tech/media/posts/24/responsive/AOY15ZJcQ-xs.webp 300w, https://itheo.tech/media/posts/24/responsive/AOY15ZJcQ-sm.webp 480w, https://itheo.tech/media/posts/24/responsive/AOY15ZJcQ-md.webp 768w, https://itheo.tech/media/posts/24/responsive/AOY15ZJcQ-lg.webp 1024w, https://itheo.tech/media/posts/24/responsive/AOY15ZJcQ-xl.webp 1360w, https://itheo.tech/media/posts/24/responsive/AOY15ZJcQ-2xl.webp 1600w">Sorry, this is just a photo, usb is plugged in on the side</p><p>So as it is an USB port it works as a serial port.</p><pre><code class="lang-python"><span class="hljs-comment"># Seriele poort confguratie</span><restore-line-break>ser = serial.Serial()<restore-line-break><restore-line-break><span class="hljs-comment"># DSMR 2.2 > 9600 7E1:</span><restore-line-break>ser.baudrate = <span class="hljs-number">9600</span><restore-line-break>ser.bytesize = serial.SEVENBITS<restore-line-break>ser.parity = serial.PARITY_EVEN<restore-line-break>ser.stopbits = serial.STOPBITS_ONE<restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></code></pre><p>You also code your python script as a serial port reader. As you can see in above code you call upon the serial packaged (you will have to install) and it reads-out the data with a 9600 baudrate.</p><p>It could be that you don’t have a 9600 baudrate smart meter but a 115200 baudrate, I guess that is a newer version (or maybe used on Gas Meters, I’m not sure.)</p><p>But don’t worry it’s all in my code.</p><p>So you can run my code headless by running it from a cronjob or by hand. It files some log files so you can take a look with tail if it still works.</p><h3 id="heading-installing-the-right-python-packages-on-raspberry-pi">Installing the right python packages on Raspberry Pi</h3><p>For this script to work you will need some packages. If you put below text in a <code>requirements.txt</code> file and run this with <code>pip install -r requirements.txt</code> it will install all you need.</p><pre><code class="lang-yaml"><span class="hljs-string">click==7.1.2</span><restore-line-break><span class="hljs-string">Flask==1.1.2</span><restore-line-break><span class="hljs-string">future==0.18.2</span><restore-line-break><span class="hljs-string">iso8601==0.1.12</span><restore-line-break><span class="hljs-string">itsdangerous==1.1.0</span><restore-line-break><span class="hljs-string">Jinja2==2.11.2</span><restore-line-break><span class="hljs-string">MarkupSafe==1.1.1</span><restore-line-break><span class="hljs-string">plotext==1.0.10</span><restore-line-break><span class="hljs-string">pyserial==3.4</span><restore-line-break><span class="hljs-string">PyYAML==5.3.1</span><restore-line-break><span class="hljs-string">Werkzeug==1.0.1</span><restore-line-break><span class="hljs-string">requirements.txt</span><restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></code></pre><p>The most important package is the <a target="_blank" href="https://pythonhosted.org/pyserial/" rel="noopener">pyserial</a> package that actually reads the data coming from your smart energy meter.</p><p>This package encapsulates the access for the serial port. It provides backends for <a target="_blank" href="http://python.org/" rel="noopener">Python</a> running on Windows, OSX, Linux, BSD (possibly any POSIX compliant system) and IronPython. The module named “serial” automatically selects the appropriate backend.</p><p>So what more do you need?</p><p>Place below script in a folder. Make sure the folder contains a folder named:</p><ul><li>logging</li><li>database</li></ul><p>And try to run the script!</p><pre><code class="lang-python"><span class="hljs-comment"># Python script om P1  weer te geven</span><restore-line-break><span class="hljs-comment"># http://domoticx.com/p1-poort-slimme-meter-telegram-uitlezen-met-python/</span><restore-line-break><restore-line-break><span class="hljs-keyword">import</span> re<restore-line-break><span class="hljs-keyword">import</span> os<restore-line-break><span class="hljs-keyword">import</span> serial   <span class="hljs-comment"># pip install pyserial</span><restore-line-break><span class="hljs-keyword">import</span> time<restore-line-break><span class="hljs-keyword">import</span> sqlite3<restore-line-break><span class="hljs-keyword">import</span> logging<restore-line-break><restore-line-break><span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime, timedelta<restore-line-break><restore-line-break>db = <span class="hljs-string">'/home/pi/PySmartMeter/database/energie.db'</span><restore-line-break><restore-line-break>timestr = time.strftime(<span class="hljs-string">"%Y%m%d"</span>)<restore-line-break>folder = <span class="hljs-string">"/home/pi/PySmartMeter/logging"</span><restore-line-break>os.makedirs(folder, exist_ok=<span class="hljs-literal">True</span>)<restore-line-break><restore-line-break>f = <span class="hljs-string">"/home/pi/PySmartMeter/logging/"</span> + str(timestr) + <span class="hljs-string">".log"</span><restore-line-break><restore-line-break>log_format = <span class="hljs-string">"%(asctime)s :: %(levelname)s :: %(name)s :: %(filename)s :: %(message)s"</span><restore-line-break><span class="hljs-comment"># logging.basicConfig(level='DEBUG', format=log_format, datefmt='%d-%b-%y %H:%M:%S')</span><restore-line-break>logging.basicConfig(<restore-line-break>    filename=f, format=<span class="hljs-string">'%(asctime)s - %(name)s - %(levelname)s - %(message)s'</span>, level=logging.DEBUG)<restore-line-break><restore-line-break><span class="hljs-comment"># Seriele poort confguratie</span><restore-line-break>ser = serial.Serial()<restore-line-break><restore-line-break><span class="hljs-comment"># DSMR 2.2 > 9600 7E1:</span><restore-line-break>ser.baudrate = <span class="hljs-number">9600</span><restore-line-break>ser.bytesize = serial.SEVENBITS<restore-line-break>ser.parity = serial.PARITY_EVEN<restore-line-break>ser.stopbits = serial.STOPBITS_ONE<restore-line-break><restore-line-break><span class="hljs-comment"># DSMR 4.0/4.2 > 115200 8N1:</span><restore-line-break><span class="hljs-comment">#ser.baudrate = 115200</span><restore-line-break><span class="hljs-comment">#ser.bytesize = serial.EIGHTBITS</span><restore-line-break><span class="hljs-comment">#ser.parity = serial.PARITY_NONE</span><restore-line-break><span class="hljs-comment">#ser.stopbits = serial.STOPBITS_ONE</span><restore-line-break><restore-line-break>ser.xonxoff = <span class="hljs-number">0</span><restore-line-break>ser.rtscts = <span class="hljs-number">0</span><restore-line-break>ser.timeout = <span class="hljs-number">12</span><restore-line-break>ser.port = <span class="hljs-string">"/dev/ttyUSB0"</span><restore-line-break>ser.close()<restore-line-break>i = <span class="hljs-number">0</span><restore-line-break>watt = []<restore-line-break>consumption_1 = <span class="hljs-literal">None</span><restore-line-break>consumption_2 = <span class="hljs-literal">None</span><restore-line-break><span class="hljs-keyword">return</span>_1 = <span class="hljs-literal">None</span><restore-line-break><span class="hljs-keyword">return</span>_2 = <span class="hljs-literal">None</span><restore-line-break><restore-line-break><restore-line-break><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">expires</span>(<span class="hljs-params">minutes: int = <span class="hljs-number">5</span></span>):</span><restore-line-break>    future = datetime.now() + timedelta(seconds=minutes*<span class="hljs-number">60</span>)<restore-line-break>    <span class="hljs-keyword">return</span> int(future.strftime(<span class="hljs-string">"%s"</span>))<restore-line-break><restore-line-break><restore-line-break><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">average</span>(<span class="hljs-params">lst</span>):</span><restore-line-break>    <span class="hljs-keyword">return</span> round(int(sum(lst) / len(lst)))<restore-line-break><restore-line-break><restore-line-break>hour_timestamp = expires(<span class="hljs-number">60</span>)<restore-line-break>five_minutes_timestamp = expires(<span class="hljs-number">5</span>)<restore-line-break><restore-line-break>logging.warning(<span class="hljs-string">"Start collecting"</span>)<restore-line-break><restore-line-break><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<restore-line-break>    ser.open()<restore-line-break>    checksum_found = <span class="hljs-literal">False</span><restore-line-break><restore-line-break>    <span class="hljs-keyword">while</span> <span class="hljs-keyword">not</span> checksum_found:<restore-line-break>        timestamp = int(time.time())<restore-line-break><restore-line-break>        <span class="hljs-keyword">try</span>:<restore-line-break><restore-line-break>            ser_data = ser.readline()  <span class="hljs-comment"># Read in serial line.</span><restore-line-break>            <span class="hljs-comment"># Strip spaces and blank lines</span><restore-line-break>            ser_data = ser_data.decode(<span class="hljs-string">'ascii'</span>).strip()<restore-line-break>        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<restore-line-break>            exc_type, exc_obj, exc_tb = sys.exc_info()<restore-line-break>            fname = os.path.split(exc_tb.tb_frame.f_code.co_filename)[<span class="hljs-number">1</span>]<restore-line-break>            logging.warning(str(e) + <span class="hljs-string">" | "</span> + str(exc_type) +<restore-line-break>                            <span class="hljs-string">" | "</span> + str(fname) + <span class="hljs-string">" | "</span> + str(exc_tb.tb_lineno))<restore-line-break>            <span class="hljs-keyword">pass</span><restore-line-break><restore-line-break>        <span class="hljs-keyword">try</span>:<restore-line-break>            <span class="hljs-keyword">if</span> re.match(<span class="hljs-string">r'(?=1-0:1.7.0)'</span>, ser_data):  <span class="hljs-comment"># 1-0:1.7.0 = Actual usage in kW</span><restore-line-break>                kw = ser_data[<span class="hljs-number">10</span>:<span class="hljs-number">-4</span>]  <span class="hljs-comment"># Knip het kW gedeelte eruit (0000.54)</span><restore-line-break>                <span class="hljs-comment"># vermengvuldig met 1000 voor conversie naar Watt (540.0) en rond het af</span><restore-line-break>                watt.append(int(float(kw) * <span class="hljs-number">1000</span>))<restore-line-break><restore-line-break>            <span class="hljs-keyword">if</span> re.match(<span class="hljs-string">r'(?=1-0:1.8.1)'</span>, ser_data):<restore-line-break>                consumption_1 = ser_data[<span class="hljs-number">10</span>:<span class="hljs-number">-5</span>]<restore-line-break><restore-line-break>            <span class="hljs-keyword">if</span> re.match(<span class="hljs-string">r'(?=1-0:1.8.2)'</span>, ser_data):<restore-line-break>                consumption_2 = ser_data[<span class="hljs-number">10</span>:<span class="hljs-number">-5</span>]<restore-line-break><restore-line-break>            <span class="hljs-keyword">if</span> re.match(<span class="hljs-string">r'(?=1-0:2.8.1)'</span>, ser_data):<restore-line-break>                <span class="hljs-keyword">return</span>_1 = ser_data[<span class="hljs-number">10</span>:<span class="hljs-number">-5</span>]<restore-line-break><restore-line-break>            <span class="hljs-keyword">if</span> re.match(<span class="hljs-string">r'(?=1-0:2.8.2)'</span>, ser_data):<restore-line-break>                <span class="hljs-keyword">return</span>_2 = ser_data[<span class="hljs-number">10</span>:<span class="hljs-number">-5</span>]<restore-line-break><restore-line-break>            <span class="hljs-keyword">try</span>:<restore-line-break>                conn<restore-line-break>            <span class="hljs-keyword">except</span> Exception:<restore-line-break>                conn = sqlite3.connect(db)<restore-line-break><restore-line-break>            <span class="hljs-keyword">try</span>:<restore-line-break>                <span class="hljs-keyword">if</span> watt:<restore-line-break>                    <span class="hljs-keyword">if</span> timestamp >= five_minutes_timestamp:<restore-line-break>                        avg_watt = average(watt)<restore-line-break>                        conn.execute(<span class="hljs-string">"""INSERT INTO consumption (consumption, datetime)<restore-line-break>                                    VALUES (?,?)"""</restore-line-break></span>, [avg_watt, timestamp])<restore-line-break>                        conn.commit()<restore-line-break>                        logging.warning(<span class="hljs-string">"Watt saved to Dbase"</span>)<restore-line-break>                        five_minutes_timestamp = expires(<span class="hljs-number">5</span>)<restore-line-break>                        watt = []<restore-line-break><restore-line-break>            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<restore-line-break>                exc_type, exc_obj, exc_tb = sys.exc_info()<restore-line-break>                fname = os.path.split(exc_tb.tb_frame.f_code.co_filename)[<span class="hljs-number">1</span>]<restore-line-break>                logging.warning(str(e) + <span class="hljs-string">" | "</span> + str(exc_type) +<restore-line-break>                                <span class="hljs-string">" | "</span> + str(fname) + <span class="hljs-string">" | "</span> + str(exc_tb.tb_lineno))<restore-line-break>                <span class="hljs-keyword">pass</span><restore-line-break><restore-line-break>            <span class="hljs-keyword">try</span>:<restore-line-break>                <span class="hljs-keyword">if</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> (consumption_1, consumption_2, <span class="hljs-keyword">return</span>_1, <span class="hljs-keyword">return</span>_2):<restore-line-break>                    <span class="hljs-keyword">if</span> timestamp >= hour_timestamp:<restore-line-break>                        conn.execute(<span class="hljs-string">"""INSERT INTO totals (consumption_1, consumption_2, return_1, return_2, datetime)<restore-line-break>                                    VALUES (?, ?, ? ,? ,?)"""</restore-line-break></span>, [consumption_1, consumption_2, <span class="hljs-keyword">return</span>_1, <span class="hljs-keyword">return</span>_2, timestamp])<restore-line-break>                        conn.commit()<restore-line-break>                        logging.warning(<span class="hljs-string">"Totals saved to Dbase"</span>)<restore-line-break>                        hour_timestamp = expires(<span class="hljs-number">60</span>)<restore-line-break>                        consumption_1 = <span class="hljs-literal">None</span><restore-line-break>                        consumption_2 = <span class="hljs-literal">None</span><restore-line-break>                        <span class="hljs-keyword">return</span>_1 = <span class="hljs-literal">None</span><restore-line-break>                        <span class="hljs-keyword">return</span>_2 = <span class="hljs-literal">None</span><restore-line-break>            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<restore-line-break>                exc_type, exc_obj, exc_tb = sys.exc_info()<restore-line-break>                fname = os.path.split(exc_tb.tb_frame.f_code.co_filename)[<span class="hljs-number">1</span>]<restore-line-break>                logging.warning(str(e) + <span class="hljs-string">" | "</span> + str(exc_type) +<restore-line-break>                                <span class="hljs-string">" | "</span> + str(fname) + <span class="hljs-string">" | "</span> + str(exc_tb.tb_lineno))<restore-line-break>                <span class="hljs-keyword">pass</span><restore-line-break><restore-line-break>        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<restore-line-break>            exc_type, exc_obj, exc_tb = sys.exc_info()<restore-line-break>            fname = os.path.split(exc_tb.tb_frame.f_code.co_filename)[<span class="hljs-number">1</span>]<restore-line-break>            logging.warning(str(e) + <span class="hljs-string">" | "</span> + str(exc_type) +<restore-line-break>                            <span class="hljs-string">" | "</span> + str(fname) + <span class="hljs-string">" | "</span> + str(exc_tb.tb_lineno))<restore-line-break>            <span class="hljs-keyword">pass</span><restore-line-break><restore-line-break>        <span class="hljs-comment"># Check when the exclamation mark is received (end of data)</span><restore-line-break>        <span class="hljs-keyword">if</span> re.match(<span class="hljs-string">r'(?=!)'</span>, ser_data, <span class="hljs-number">0</span>):<restore-line-break>            checksum_found = <span class="hljs-literal">True</span><restore-line-break><restore-line-break>    ser.close()<restore-line-break>conn.close()<restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></code></pre><p>Questions? Let me know! <a target="_blank" href="https://www.buymeacoffee.com/itheo" rel="noopener">Coffee? Yes Please!</a></p><p>Originally the initial code came from <a target="_blank" href="http://domoticx.com/p1-poort-slimme-meter-telegram-uitlezen-met-python/" rel="noopener">domoticx.com</a> but I changed it to my needs</p></div><footer class="wrapper post__footer"><p class="post__last-updated">This article was updated on June 1, 2024</p><div class="post__share"></div><div class="post__bio bio"><img src="https://itheo.tech/media/website/64.png" loading="lazy" height="512" width="512" class="bio__avatar" alt="Theo van der Sluijs"><div><h3 class="bio__name"><a href="https://itheo.tech/authors/theo-van-der-sluijs/" rel="author">Theo van der Sluijs</a></h3></div></div></footer></article><nav class="post__nav"><div class="post__nav-inner"><div class="post__nav-prev"><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="https://itheo.tech/assets/svg/svg-map.svg#arrow-prev"/></svg> <a href="https://itheo.tech/install-python-38-on-a-raspberry-pi.html" class="post__nav-link" rel="prev"><span>Previous</span> Install Python 3.8 on a Raspberry Pi</a></div><div class="post__nav-next"><a href="https://itheo.tech/use-ssh-keys-on-your-raspberry-pi.html" class="post__nav-link" rel="next"><span>Next</span> Use SSH keys on your Raspberry Pi </a><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="https://itheo.tech/assets/svg/svg-map.svg#arrow-next"/></svg></div></div></nav><div class="post__related related"><div class="wrapper"><h2 class="h5 related__title">You should also read:</h2><article class="related__item"><div class="feed__meta"><time datetime="2018-10-03T22:00" class="feed__date">October 3, 2018</time></div><h3 class="h1"><a href="https://itheo.tech/scraping-contact-data-with-python-export-to-csv.html">Scraping contact data with Python export to csv</a></h3></article><article class="related__item"><div class="feed__meta"><time datetime="2018-11-30T23:00" class="feed__date">November 30, 2018</time></div><h3 class="h1"><a href="https://itheo.tech/image-resize-python-automation-script.html">Image resize python automation script</a></h3></article><article class="related__item"><div class="feed__meta"><time datetime="2018-12-19T23:00" class="feed__date">December 19, 2018</time></div><h3 class="h1"><a href="https://itheo.tech/get-colors-from-images-python-script.html">Get colors from images python script</a></h3></article></div></div></main><footer class="footer"><div class="footer__copyright"><p>iTheo.Tech</p></div><button onclick="backToTopFunction()" id="backToTop" class="footer__bttop" aria-label="Back to top" title="Back to top"><svg><use xlink:href="https://itheo.tech/assets/svg/svg-map.svg#toparrow"/></svg></button></footer></div><script defer="defer" src="https://itheo.tech/assets/js/scripts.min.js?v=f47c11534595205f20935f0db2a62a85"></script><script>window.publiiThemeMenuConfig={mobileMenuMode:'sidebar',animationSpeed:300,submenuWidth: 'auto',doubleClickTime:500,mobileMenuExpandableSubmenus:true,relatedContainerForOverlayMenuSelector:'.top'};</script><script>var images = document.querySelectorAll('img[loading]');
        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script></body></html>