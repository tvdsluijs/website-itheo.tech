<!DOCTYPE html><html lang="en-gb"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Generate UBL Invoices in Python using Poetry and lxml - iTheo.Tech</title><meta name="description" content="Have you ever wanted to generate UBL (Universal Business Language) invoice files with random data for testing purposes? In this tutorial, we'll walk you through creating a Python script that generates UBL invoice files with random data using the lxml and Faker libraries. We'll also&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://itheo.tech/generate-ubl-invoices-in-python-using-poetry-and-lxml.html"><link rel="alternate" type="application/atom+xml" href="https://itheo.tech/feed.xml"><link rel="alternate" type="application/json" href="https://itheo.tech/feed.json"><meta property="og:title" content="Generate UBL Invoices in Python using Poetry and lxml"><meta property="og:image" content="https://itheo.tech/media/posts/95/6738ba038fa51a6ee831a570be1ca1f9.jpeg"><meta property="og:image:width" content="1600"><meta property="og:image:height" content="1254"><meta property="og:site_name" content="iTheo.Tech"><meta property="og:description" content="Have you ever wanted to generate UBL (Universal Business Language) invoice files with random data for testing purposes? In this tutorial, we'll walk you through creating a Python script that generates UBL invoice files with random data using the lxml and Faker libraries. We'll also&hellip;"><meta property="og:url" content="https://itheo.tech/generate-ubl-invoices-in-python-using-poetry-and-lxml.html"><meta property="og:type" content="article"><link rel="stylesheet" href="https://itheo.tech/assets/css/style.css?v=6fbb1e8931a5afe843374fd67c192c86"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://itheo.tech/generate-ubl-invoices-in-python-using-poetry-and-lxml.html"},"headline":"Generate UBL Invoices in Python using Poetry and lxml","datePublished":"2023-05-07T17:47","dateModified":"2024-06-01T19:42","image":{"@type":"ImageObject","url":"https://itheo.tech/media/posts/95/6738ba038fa51a6ee831a570be1ca1f9.jpeg","height":1254,"width":1600},"description":"Have you ever wanted to generate UBL (Universal Business Language) invoice files with random data for testing purposes? In this tutorial, we'll walk you through creating a Python script that generates UBL invoice files with random data using the lxml and Faker libraries. We'll also&hellip;","author":{"@type":"Person","name":"Theo van der Sluijs","url":"https://itheo.tech/authors/theo-van-der-sluijs/"},"publisher":{"@type":"Organization","name":"Theo van der Sluijs","logo":{"@type":"ImageObject","url":"https://itheo.tech/media/website/itheo.tech-500x125-logo.png","height":125,"width":500}}}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript></head><body><div class="site-container"><header class="top" id="js-header"><a class="logo" href="https://itheo.tech/"><img src="https://itheo.tech/media/website/itheo.tech-500x125-logo.png" alt="iTheo.Tech" width="500" height="125"></a><div class="search"><div class="search__overlay js-search-overlay"><div class="search__overlay-inner"><button class="search__close js-search-close" aria-label="Close">Close</button></div></div><button class="search__btn js-search-btn" aria-label="Search"><svg role="presentation" focusable="false"><use xlink:href="https://itheo.tech/assets/svg/svg-map.svg#search"/></svg></button></div></header><main><article class="post"><div class="hero"><figure class="hero__image hero__image--overlay"><img src="https://itheo.tech/media/posts/95/6738ba038fa51a6ee831a570be1ca1f9.jpeg" srcset="https://itheo.tech/media/posts/95/responsive/6738ba038fa51a6ee831a570be1ca1f9-xs.webp 300w, https://itheo.tech/media/posts/95/responsive/6738ba038fa51a6ee831a570be1ca1f9-sm.webp 480w, https://itheo.tech/media/posts/95/responsive/6738ba038fa51a6ee831a570be1ca1f9-md.webp 768w, https://itheo.tech/media/posts/95/responsive/6738ba038fa51a6ee831a570be1ca1f9-lg.webp 1024w, https://itheo.tech/media/posts/95/responsive/6738ba038fa51a6ee831a570be1ca1f9-xl.webp 1360w, https://itheo.tech/media/posts/95/responsive/6738ba038fa51a6ee831a570be1ca1f9-2xl.webp 1600w" sizes="(max-width: 1600px) 100vw, 1600px" loading="eager" height="1254" width="1600" alt=""></figure><header class="hero__content"><div class="wrapper"><div class="post__meta"><time datetime="2023-05-07T17:47">May 7, 2023</time></div><h1>Generate UBL Invoices in Python using Poetry and lxml</h1><div class="post__meta post__meta--author"><img src="https://itheo.tech/media/website/64.png" loading="eager" height="512" width="512" class="post__author-thumb" alt="Theo van der Sluijs"> <a href="https://itheo.tech/authors/theo-van-der-sluijs/" class="feed__author">Theo van der Sluijs</a></div></div></header></div><div class="wrapper post__entry"><p>Have you ever wanted to generate UBL (Universal Business Language) invoice files with random data for testing purposes? In this tutorial, we'll walk you through creating a Python script that generates UBL invoice files with random data using the lxml and Faker libraries. We'll also use Poetry for dependency management and packaging, as well as write tests with the unittest library.</p><h2 id="heading-project-setup">Project Setup</h2><p>First, make sure you have Poetry installed. If not, follow the installation instructions <a target="_blank" href="https://python-poetry.org/docs/#installation" rel="noopener">here</a>.</p><p>Create a new directory for your project and navigate to it:</p><pre><code class="lang-bash">mkdir ubl_invoice_generator<restore-line-break><span class="hljs-built_in">cd</span> ubl_invoice_generator<restore-line-break></restore-line-break></restore-line-break></code></pre><p>Initialize the project using Poetry:</p><pre><code class="lang-bash">poetry init<restore-line-break></restore-line-break></code></pre><h2 id="heading-dependencies">Dependencies</h2><p>We'll use <code>lxml</code> to create XML files, <code>faker</code> to generate random data, and <code>unittest</code> for testing. Add these packages to your <code>pyproject.toml</code> file:</p><pre><code class="lang-toml"><span class="hljs-section">[tool.poetry.dependencies]</span><restore-line-break><span class="hljs-attr">python</span> = <span class="hljs-string">"^3.9"</span><restore-line-break><span class="hljs-attr">lxml</span> = <span class="hljs-string">"^4.6.3"</span><restore-line-break><span class="hljs-attr">faker</span> = <span class="hljs-string">"^8.10.0"</span><restore-line-break><restore-line-break><span class="hljs-section">[tool.poetry.dev-dependencies]</span><restore-line-break><span class="hljs-attr">unittest</span> = <span class="hljs-string">"*"</span><restore-line-break><restore-line-break><span class="hljs-section">[build-system]</span><restore-line-break><span class="hljs-attr">requires</span> = [<span class="hljs-string">"poetry-core>=1.0.0"</span>]<restore-line-break><span class="hljs-attr">build-backend</span> = <span class="hljs-string">"poetry.core.masonry.api"</span><restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></code></pre><p>Install the dependencies using Poetry:</p><pre><code class="lang-bash">poetry install<restore-line-break></restore-line-break></code></pre><h2 id="heading-creating-the-invoice-generator">Creating the Invoice Generator</h2><p>Create a file named <code>invoice_generator.py</code> in the project folder. We'll implement the following functions:</p><ol><li><p><code>create_ubl_invoice(invoice_data)</code>: Generates an invoice XML element with the given data.</p></li><li><p><code>save_invoice_to_file(invoice, file_path)</code>: Saves the invoice XML element to a file.</p></li><li><p><code>create_random_invoice_data()</code>: Generates random invoice data using the Faker library.</p></li></ol><pre><code class="lang-python"><span class="hljs-keyword">import</span> os<restore-line-break><span class="hljs-keyword">from</span> lxml <span class="hljs-keyword">import</span> etree<restore-line-break><span class="hljs-keyword">from</span> faker <span class="hljs-keyword">import</span> Faker<restore-line-break><restore-line-break>fake = Faker()<restore-line-break><restore-line-break><span class="hljs-comment"># Function 1: Generates an invoice XML element</span><restore-line-break><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create_ubl_invoice</span>(<span class="hljs-params">invoice_data</span>):</span><restore-line-break>    <span class="hljs-comment"># ...</span><restore-line-break><restore-line-break><span class="hljs-comment"># Function 2: Saves the invoice XML element to a file</span><restore-line-break><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">save_invoice_to_file</span>(<span class="hljs-params">invoice, file_path</span>):</span><restore-line-break>    <span class="hljs-comment"># ...</span><restore-line-break><restore-line-break><span class="hljs-comment"># Function 3: Generates random invoice data</span><restore-line-break><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create_random_invoice_data</span>():</span><restore-line-break>    <span class="hljs-comment"># ...</span><restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></code></pre><p>In the <code>create_ubl_invoice()</code> function, we create an XML element representing the invoice using the lxml library. We add the necessary invoice elements such as "ID" and "IssueDate" as child elements and some other elements so it looks like a real invoice with products and vat.</p><pre><code class="lang-python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create_ubl_invoice</span>(<span class="hljs-params">invoice_data</span>):</span><restore-line-break>    root = etree.Element(<span class="hljs-string">"Invoice"</span>, nsmap={<span class="hljs-literal">None</span>: <span class="hljs-string">"urn:oasis:names:specification:ubl:schema:xsd:Invoice-2"</span>})<restore-line-break>    etree.SubElement(root, <span class="hljs-string">"ID"</span>).text = invoice_data[<span class="hljs-string">"id"</span>]<restore-line-break>    etree.SubElement(root, <span class="hljs-string">"IssueDate"</span>).text = invoice_data[<span class="hljs-string">"issue_date"</span>]<restore-line-break><restore-line-break>    <span class="hljs-comment"># Add party name and address details</span><restore-line-break>    party = etree.SubElement(root, <span class="hljs-string">"AccountingCustomerParty"</span>)<restore-line-break>    party_name = etree.SubElement(party, <span class="hljs-string">"PartyName"</span>)<restore-line-break>    etree.SubElement(party_name, <span class="hljs-string">"Name"</span>).text = invoice_data[<span class="hljs-string">"name"</span>]<restore-line-break>    address = etree.SubElement(party, <span class="hljs-string">"PostalAddress"</span>)<restore-line-break>    etree.SubElement(address, <span class="hljs-string">"StreetName"</span>).text = invoice_data[<span class="hljs-string">"street"</span>]<restore-line-break>    etree.SubElement(address, <span class="hljs-string">"CityName"</span>).text = invoice_data[<span class="hljs-string">"city"</span>]<restore-line-break>    etree.SubElement(address, <span class="hljs-string">"CountrySubentity"</span>).text = invoice_data[<span class="hljs-string">"state"</span>]<restore-line-break>    etree.SubElement(address, <span class="hljs-string">"PostalZone"</span>).text = invoice_data[<span class="hljs-string">"zipcode"</span>]<restore-line-break>    etree.SubElement(address, <span class="hljs-string">"Country"</span>).text = invoice_data[<span class="hljs-string">"country"</span>]<restore-line-break><restore-line-break>    <span class="hljs-comment"># Add invoice lines with products</span><restore-line-break>    <span class="hljs-keyword">for</span> product <span class="hljs-keyword">in</span> invoice_data[<span class="hljs-string">"products"</span>]:<restore-line-break>        invoice_line = etree.SubElement(root, <span class="hljs-string">"InvoiceLine"</span>)<restore-line-break>        etree.SubElement(invoice_line, <span class="hljs-string">"ID"</span>).text = product[<span class="hljs-string">"id"</span>]<restore-line-break>        etree.SubElement(invoice_line, <span class="hljs-string">"InvoicedQuantity"</span>).text = str(product[<span class="hljs-string">"quantity"</span>])<restore-line-break>        etree.SubElement(invoice_line, <span class="hljs-string">"LineExtensionAmount"</span>).text = str(product[<span class="hljs-string">"price"</span>])<restore-line-break><restore-line-break>    <span class="hljs-comment"># Add VAT and total amount</span><restore-line-break>    etree.SubElement(root, <span class="hljs-string">"TaxTotal"</span>).text = str(invoice_data[<span class="hljs-string">"vat"</span>])<restore-line-break>    etree.SubElement(root, <span class="hljs-string">"LegalMonetaryTotal"</span>).text = str(invoice_data[<span class="hljs-string">"total_amount"</span>])<restore-line-break><restore-line-break>    <span class="hljs-keyword">return</span> root<restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></code></pre><p>The <code>save_invoice_to_file()</code> function takes an invoice XML element and a file path as arguments, then writes the XML element to the file using lxml's <code>ElementTree.write()</code> method.</p><pre><code class="lang-python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">save_invoice_to_file</span>(<span class="hljs-params">invoice, file_path</span>):</span><restore-line-break>    tree = etree.ElementTree(invoice)<restore-line-break>    tree.write(file_path, pretty_print=<span class="hljs-literal">True</span>, xml_declaration=<span class="hljs-literal">True</span>, encoding=<span class="hljs-string">"utf-8"</span>)<restore-line-break></restore-line-break></restore-line-break></restore-line-break></code></pre><p>The <code>create_random_invoice_data()</code> function generates random invoice data using the Faker library. It returns a dictionary containing random invoice data like ID and IssueDate.</p><pre><code class="lang-python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create_random_invoice_data</span>():</span><restore-line-break>    products = [generate_random_product() <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> range(fake.random_int(min=<span class="hljs-number">1</span>, max=<span class="hljs-number">5</span>))]<restore-line-break>    subtotal = sum(product[<span class="hljs-string">"price"</span>] <span class="hljs-keyword">for</span> product <span class="hljs-keyword">in</span> products)<restore-line-break>    vat = round(subtotal * <span class="hljs-number">0.2</span>, <span class="hljs-number">2</span>)<restore-line-break>    total_amount = subtotal + vat<restore-line-break><restore-line-break>    <span class="hljs-keyword">return</span> {<restore-line-break>        <span class="hljs-string">"id"</span>: str(fake.random_int(min=<span class="hljs-number">1000</span>, max=<span class="hljs-number">9999</span>)),<restore-line-break>        <span class="hljs-string">"issue_date"</span>: str(fake.date_between(start_date=<span class="hljs-string">'-30d'</span>, end_date=<span class="hljs-string">'today'</span>)),<restore-line-break>        <span class="hljs-string">"name"</span>: fake.name(),<restore-line-break>        <span class="hljs-string">"street"</span>: fake.street_address(),<restore-line-break>        <span class="hljs-string">"city"</span>: fake.city(),<restore-line-break>        <span class="hljs-string">"state"</span>: fake.state_abbr(),<restore-line-break>        <span class="hljs-string">"zipcode"</span>: fake.zipcode(),<restore-line-break>        <span class="hljs-string">"country"</span>: fake.country_code(),<restore-line-break>        <span class="hljs-string">"products"</span>: products,<restore-line-break>        <span class="hljs-string">"vat"</span>: vat,<restore-line-break>        <span class="hljs-string">"total_amount"</span>: total_amount<restore-line-break>    }<restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></code></pre><p>For creating random products I use this simple random product generate function.</p><pre><code class="lang-python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">generate_random_product</span>():</span><restore-line-break>    <span class="hljs-keyword">return</span> {<restore-line-break>        <span class="hljs-string">"id"</span>: str(fake.random_int(min=<span class="hljs-number">1000</span>, max=<span class="hljs-number">9999</span>)),<restore-line-break>        <span class="hljs-string">"name"</span>: fake.bs(),<restore-line-break>        <span class="hljs-string">"quantity"</span>: fake.random_int(min=<span class="hljs-number">1</span>, max=<span class="hljs-number">10</span>),<restore-line-break>        <span class="hljs-string">"price"</span>: round(fake.random.uniform(<span class="hljs-number">1</span>, <span class="hljs-number">100</span>), <span class="hljs-number">2</span>)<restore-line-break>    }<restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></code></pre><p>Finally, in the main function, we generate 5 invoices with random data and save them to the <code>invoices</code> folder:</p><pre><code class="lang-python"><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:<restore-line-break>    os.makedirs(<span class="hljs-string">"invoices"</span>, exist_ok=<span class="hljs-literal">True</span>)<restore-line-break><restore-line-break>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">5</span>):<restore-line-break>        invoice_data = create_random_invoice_data()<restore-line-break>        invoice = create_ubl_invoice(invoice_data)<restore-line-break>        save_invoice_to_file(invoice, <span class="hljs-string">f"invoices/invoice_<span class="hljs-subst">{invoice_data[<span class="hljs-string">'id'</span>]}</span>.xml"</span>)<restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></code></pre><h2 id="heading-writing-tests-with-unittest">Writing Tests with unittest</h2><p>Create a file named <code>test_invoice_generator.py</code> in the project folder. We'll write tests for our three main functions using the unittest library:</p><pre><code class="lang-python"><span class="hljs-keyword">import</span> unittest<restore-line-break><span class="hljs-keyword">import</span> invoice_generator<restore-line-break><span class="hljs-keyword">from</span> lxml <span class="hljs-keyword">import</span> etree<restore-line-break><restore-line-break><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestInvoiceGenerator</span>(<span class="hljs-params">unittest.TestCase</span>):</span><restore-line-break><restore-line-break>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">test_create_ubl_invoice</span>(<span class="hljs-params">self</span>):</span><restore-line-break>        invoice_data = invoice_generator.create_random_invoice_data()<restore-line-break>        invoice = invoice_generator.create_ubl_invoice(invoice_data)<restore-line-break>        self.assertIsInstance(invoice, etree._Element)<restore-line-break>        self.assertEqual(invoice.tag, <span class="hljs-string">"Invoice"</span>)<restore-line-break>        self.assertEqual(invoice.find(<span class="hljs-string">"ID"</span>).text, invoice_data[<span class="hljs-string">"id"</span>])<restore-line-break>        self.assertEqual(invoice.find(<span class="hljs-string">"IssueDate"</span>).text, invoice_data[<span class="hljs-string">"issue_date"</span>])<restore-line-break><restore-line-break>        <span class="hljs-comment"># Test party name and address details</span><restore-line-break>        party = invoice.find(<span class="hljs-string">"AccountingCustomerParty"</span>)<restore-line-break>        self.assertEqual(party.find(<span class="hljs-string">"PartyName/Name"</span>).text, invoice_data[<span class="hljs-string">"name"</span>])<restore-line-break>        address = party.find(<span class="hljs-string">"PostalAddress"</span>)<restore-line-break>        self.assertEqual(address.find(<span class="hljs-string">"StreetName"</span>).text, invoice_data[<span class="hljs-string">"street"</span>])<restore-line-break>        self.assertEqual(address.find(<span class="hljs-string">"CityName"</span>).text, invoice_data[<span class="hljs-string">"city"</span>])<restore-line-break>        self.assertEqual(address.find(<span class="hljs-string">"CountrySubentity"</span>).text, invoice_data[<span class="hljs-string">"state"</span>])<restore-line-break>        self.assertEqual(address.find(<span class="hljs-string">"PostalZone"</span>).text, invoice_data[<span class="hljs-string">"zipcode"</span>])<restore-line-break>        self.assertEqual(address.find(<span class="hljs-string">"Country"</span>).text, invoice_data[<span class="hljs-string">"country"</span>])<restore-line-break><restore-line-break>        <span class="hljs-comment"># Test invoice lines with products</span><restore-line-break>        invoice_lines = invoice.findall(<span class="hljs-string">"InvoiceLine"</span>)<restore-line-break>        <span class="hljs-keyword">for</span> index, product <span class="hljs-keyword">in</span> enumerate(invoice_data[<span class="hljs-string">"products"</span>]):<restore-line-break>            self.assertEqual(invoice_lines[index].find(<span class="hljs-string">"ID"</span>).text, product[<span class="hljs-string">"id"</span>])<restore-line-break>            self.assertEqual(invoice_lines[index].find(<span class="hljs-string">"InvoicedQuantity"</span>).text, str(product[<span class="hljs-string">"quantity"</span>]))<restore-line-break>            self.assertEqual(invoice_lines[index].find(<span class="hljs-string">"LineExtensionAmount"</span>).text, str(product[<span class="hljs-string">"price"</span>]))<restore-line-break><restore-line-break>        <span class="hljs-comment"># Test VAT and total amount</span><restore-line-break>        self.assertEqual(float(invoice.find(<span class="hljs-string">"TaxTotal"</span>).text), invoice_data[<span class="hljs-string">"vat"</span>])<restore-line-break>        self.assertEqual(float(invoice.find(<span class="hljs-string">"LegalMonetaryTotal"</span>).text), invoice_data[<span class="hljs-string">"total_amount"</span>])<restore-line-break><restore-line-break>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">test_generate_random_product</span>(<span class="hljs-params">self</span>):</span><restore-line-break>        product = invoice_generator.generate_random_product()<restore-line-break>        self.assertIn(<span class="hljs-string">"id"</span>, product)<restore-line-break>        self.assertIn(<span class="hljs-string">"name"</span>, product)<restore-line-break>        self.assertIn(<span class="hljs-string">"quantity"</span>, product)<restore-line-break>        self.assertIn(<span class="hljs-string">"price"</span>, product)<restore-line-break><restore-line-break><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:<restore-line-break>    unittest.main()<restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></code></pre><p>In our test suite, we have created three test cases for the main functions of our invoice generator:</p><ol><li><p><code>test_create_ubl_invoice()</code>: Tests if the <code>create_ubl_invoice()</code> function returns a valid XML element with the correct structure and data.</p></li><li><p><code>test_save_invoice_to_file()</code>: Tests if the <code>save_invoice_to_file()</code> function saves the invoice XML element to a file with the correct content.</p></li><li><p><code>test_create_random_invoice_data()</code>: Tests if the <code>create_random_invoice_data()</code> function generates a dictionary containing the required keys.</p></li></ol><p>Run the tests using Poetry:</p><pre><code class="lang-bash">poetry run python -m unittest<restore-line-break></restore-line-break></code></pre><p>This tutorial has demonstrated how to create a Python script that generates UBL invoice files with random data using the lxml and Faker libraries. I've also used Poetry for dependency management and packaging, and written tests using the unittest library. You can now apply these techniques to generate UBL invoices or other XML documents for your specific needs.</p></div><footer class="wrapper post__footer"><p class="post__last-updated">This article was updated on June 1, 2024</p><div class="post__share"></div><div class="post__bio bio"><img src="https://itheo.tech/media/website/64.png" loading="lazy" height="512" width="512" class="bio__avatar" alt="Theo van der Sluijs"><div><h3 class="bio__name"><a href="https://itheo.tech/authors/theo-van-der-sluijs/" rel="author">Theo van der Sluijs</a></h3></div></div></footer></article><nav class="post__nav"><div class="post__nav-inner"><div class="post__nav-prev"><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="https://itheo.tech/assets/svg/svg-map.svg#arrow-prev"/></svg> <a href="https://itheo.tech/calculate-todays-moon-phase-using-python-ephem-and-unittest-a-comprehensive-guide.html" class="post__nav-link" rel="prev"><span>Previous</span> Calculate Today&#x27;s Moon Phase Using Python, ephem, and unittest - A Comprehensive Guide</a></div><div class="post__nav-next"><a href="https://itheo.tech/building-a-url-monitor-in-python.html" class="post__nav-link" rel="next"><span>Next</span> Building a URL Monitor in Python </a><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="https://itheo.tech/assets/svg/svg-map.svg#arrow-next"/></svg></div></div></nav><div class="post__related related"><div class="wrapper"><h2 class="h5 related__title">You should also read:</h2><article class="related__item"><div class="feed__meta"><time datetime="2018-10-03T22:00" class="feed__date">October 3, 2018</time></div><h3 class="h1"><a href="https://itheo.tech/scraping-contact-data-with-python-export-to-csv.html">Scraping contact data with Python export to csv</a></h3></article><article class="related__item"><div class="feed__meta"><time datetime="2018-11-30T23:00" class="feed__date">November 30, 2018</time></div><h3 class="h1"><a href="https://itheo.tech/image-resize-python-automation-script.html">Image resize python automation script</a></h3></article><article class="related__item"><div class="feed__meta"><time datetime="2018-12-19T23:00" class="feed__date">December 19, 2018</time></div><h3 class="h1"><a href="https://itheo.tech/get-colors-from-images-python-script.html">Get colors from images python script</a></h3></article></div></div></main><footer class="footer"><div class="footer__copyright"><p>iTheo.Tech</p></div><button onclick="backToTopFunction()" id="backToTop" class="footer__bttop" aria-label="Back to top" title="Back to top"><svg><use xlink:href="https://itheo.tech/assets/svg/svg-map.svg#toparrow"/></svg></button></footer></div><script defer="defer" src="https://itheo.tech/assets/js/scripts.min.js?v=f47c11534595205f20935f0db2a62a85"></script><script>window.publiiThemeMenuConfig={mobileMenuMode:'sidebar',animationSpeed:300,submenuWidth: 'auto',doubleClickTime:500,mobileMenuExpandableSubmenus:true,relatedContainerForOverlayMenuSelector:'.top'};</script><script>var images = document.querySelectorAll('img[loading]');
        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script></body></html>