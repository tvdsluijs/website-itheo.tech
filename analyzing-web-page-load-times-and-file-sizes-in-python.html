<!DOCTYPE html>
<html lang="en-gb">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
            <title>Analyzing Web Page Load Times and File Sizes in Python - iTheo.Tech </title>
        <meta name="description" content="In this article, we'll explore a Python script that analyzes the load times and file sizes of CSS, JavaScript, and image files for a given web page. We'll use the BeautifulSoup library to parse HTML content, the requests library to fetch resources, and the openpyxl&hellip;" />
         
        <meta name="generator" content="Publii Open-Source CMS for Static Site" />

        <link rel="canonical" href="https://itheo.tech/analyzing-web-page-load-times-and-file-sizes-in-python.html">
        <link rel="alternate" type="application/atom+xml" href="https://itheo.tech/feed.xml" />
<link rel="alternate" type="application/json" href="https://itheo.tech/feed.json" />

        <meta property="og:title" content="Analyzing Web Page Load Times and File Sizes in Python" /><meta property="og:image" content="https://itheo.tech/media/posts/97/646ac4fbe350a1e7f63df01d9896839d.jpeg"/><meta property="og:image:width" content="1600" /><meta property="og:image:height" content="1067" /><meta property="og:site_name" content="iTheo.Tech" /><meta property="og:description" content="In this article, we'll explore a Python script that analyzes the load times and file sizes of CSS, JavaScript, and image files for a given web page. We'll use the BeautifulSoup library to parse HTML content, the requests library to fetch resources, and the openpyxl&hellip;" /><meta property="og:url" content="https://itheo.tech/analyzing-web-page-load-times-and-file-sizes-in-python.html" /><meta property="og:type" content="article" />
        <link rel="stylesheet" href="https://itheo.tech/assets/css/style.css?v=6fbb1e8931a5afe843374fd67c192c86">
        <script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://itheo.tech/analyzing-web-page-load-times-and-file-sizes-in-python.html"},"headline":"Analyzing Web Page Load Times and File Sizes in Python","datePublished":"2023-05-02T19:06","dateModified":"2024-06-01T19:42","image":{"@type":"ImageObject","url":"https://itheo.tech/media/posts/97/646ac4fbe350a1e7f63df01d9896839d.jpeg","height":1067,"width":1600},"description":"In this article, we'll explore a Python script that analyzes the load times and file sizes of CSS, JavaScript, and image files for a given web page. We'll use the BeautifulSoup library to parse HTML content, the requests library to fetch resources, and the openpyxl&hellip;","author":{"@type":"Person","name":"Theo van der Sluijs","url":"https://itheo.tech/authors/theo-van-der-sluijs/"},"publisher":{"@type":"Organization","name":"Theo van der Sluijs","logo":{"@type":"ImageObject","url":"https://itheo.tech/media/website/itheo.tech-500x125-logo.png","height":125,"width":500}}}</script>
        
        <noscript>
            <style>
                img[loading] {
                    opacity: 1;
                }
            </style>
        </noscript>	
        
    </head>
    <body>
        <div class="site-container">
   <header class="top" id="js-header">
      <a class="logo" href="https://itheo.tech/">
            <img src="https://itheo.tech/media/website/itheo.tech-500x125-logo.png" alt="iTheo.Tech" width="500" height="125">
      </a>
         <div class="search">
            <div class="search__overlay js-search-overlay">
               <div class="search__overlay-inner">
                   
                  <button class="search__close js-search-close" aria-label="Close">
                     Close
                  </button>
               </div>
            </div>
            <button class="search__btn js-search-btn" aria-label="Search">
               <svg role="presentation" focusable="false">
                  <use xlink:href="https://itheo.tech/assets/svg/svg-map.svg#search"/>
               </svg>
            </button>
         </div>
   </header>
<main>
      <article class="post">
         <div class="hero">
             
                  <figure class="hero__image hero__image--overlay">                      
                     <img
                        src="https://itheo.tech/media/posts/97/646ac4fbe350a1e7f63df01d9896839d.jpeg"
                            srcset="https://itheo.tech/media/posts/97/responsive/646ac4fbe350a1e7f63df01d9896839d-xs.webp 300w ,https://itheo.tech/media/posts/97/responsive/646ac4fbe350a1e7f63df01d9896839d-sm.webp 480w ,https://itheo.tech/media/posts/97/responsive/646ac4fbe350a1e7f63df01d9896839d-md.webp 768w ,https://itheo.tech/media/posts/97/responsive/646ac4fbe350a1e7f63df01d9896839d-lg.webp 1024w ,https://itheo.tech/media/posts/97/responsive/646ac4fbe350a1e7f63df01d9896839d-xl.webp 1360w ,https://itheo.tech/media/posts/97/responsive/646ac4fbe350a1e7f63df01d9896839d-2xl.webp 1600w" sizes="(max-width: 1600px) 100vw, 1600px"
                         loading="eager"
                        height="1067"
                        width="1600"
                        alt="">
                      
                  </figure>
             
            <header class="hero__content">
               <div class="wrapper">
                     <div class="post__meta">
                        <time datetime="2023-05-02T19:06">
                              May 2, 2023
                        </time>
                     </div>
                  <h1>
                     Analyzing Web Page Load Times and File Sizes in Python
                  </h1>
                     <div class="post__meta post__meta--author">
                              <img 
                                 src="https://itheo.tech/media/website/64.png" 
                                  loading="eager"
                                 height="512"
                                 width="512"
                                 class="post__author-thumb" 
                                 alt="Theo van der Sluijs">
                           <a href="https://itheo.tech/authors/theo-van-der-sluijs/" class="feed__author">Theo van der Sluijs</a>
                     </div>
               </div>
            </header>
         </div>

         <div class="wrapper post__entry">           
            <p>In this article, we'll explore a Python script that analyzes the load times and file sizes of CSS, JavaScript, and image files for a given web page. We'll use the BeautifulSoup library to parse HTML content, the requests library to fetch resources, and the openpyxl library to store the results in an Excel file.</p>
<h2 id="heading-package-management-and-dependencies">Package Management and Dependencies</h2>
<p>We'll use Poetry as a dependency management and packaging tool. To start, install Poetry using the official installation guide: <a target="_blank" href="https://python-poetry.org/docs/#installation" rel="noopener">https://python-poetry.org/docs/#installation</a>.</p>
<p>Once you have Poetry installed, create a new project:</p>
<pre><code class="lang-bash">poetry new web_load_times<restore-line-break><span class="hljs-built_in">cd</span> web_load_times<restore-line-break></code></pre>
<p>Next, add the required dependencies:</p>
<pre><code class="lang-bash">poetry add requests beautifulsoup4 openpyxl<restore-line-break></code></pre>
<h2 id="heading-writing-the-script">Writing the Script</h2>
<p>Inside the <code>web_load_times</code> folder, create a new file named <code>load_times.py</code>. This file will contain the main script.</p>
<p>We start by importing the required libraries:</p>
<pre><code class="lang-python"><span class="hljs-keyword">import</span> requests<restore-line-break><span class="hljs-keyword">import</span> time<restore-line-break><span class="hljs-keyword">from</span> bs4 <span class="hljs-keyword">import</span> BeautifulSoup<restore-line-break><span class="hljs-keyword">from</span> openpyxl <span class="hljs-keyword">import</span> Workbook<restore-line-break><span class="hljs-keyword">from</span> urllib.parse <span class="hljs-keyword">import</span> urljoin<restore-line-break></code></pre>
<p>The <code>format_size</code> function formats the file size in bytes, kilobytes, or megabytes based on its value:</p>
<pre><code class="lang-python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">format_size</span>(<span class="hljs-params">size</span>):</span><restore-line-break>    <span class="hljs-keyword">for</span> unit <span class="hljs-keyword">in</span> [<span class="hljs-string">'B'</span>, <span class="hljs-string">'KB'</span>, <span class="hljs-string">'MB'</span>]:<restore-line-break>        <span class="hljs-keyword">if</span> size < <span class="hljs-number">1024.0</span>:<restore-line-break>            <span class="hljs-keyword">break</span><restore-line-break>        size /= <span class="hljs-number">1024.0</span><restore-line-break>    <span class="hljs-keyword">return</span> <span class="hljs-string">f"<span class="hljs-subst">{size:<span class="hljs-number">.2</span>f}</span> <span class="hljs-subst">{unit}</span>"</span><restore-line-break></code></pre>
<p>The <code>main</code> function performs the following tasks:</p>
<ol>
<li>
<p>Takes the URL input.</p>
</li>
<li>
<p>Fetches the web page and calculates the complete page load time.</p>
</li>
<li>
<p>Parses the web page content using BeautifulSoup.</p>
</li>
<li>
<p>Creates an Excel workbook with appropriate headers.</p>
</li>
<li>
<p>Iterates through the relevant HTML elements (CSS, JavaScript, and images), calculates their load times, and writes the results to the Excel file.</p>
</li>
</ol>
<p>Here's the <code>main</code> function:</p>
<pre><code class="lang-python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>():</span><restore-line-break>    <span class="hljs-comment"># (1) Take URL input</span><restore-line-break>    url = input(<span class="hljs-string">"Please enter the URL: "</span>)<restore-line-break><restore-line-break>    <span class="hljs-comment"># (2) Fetch the web page and calculate the complete page load time</span><restore-line-break>    start_time = time.time()<restore-line-break>    response = requests.get(url)<restore-line-break>    page_load_time = (time.time() - start_time) * <span class="hljs-number">1000</span><restore-line-break><restore-line-break>    <span class="hljs-comment"># (3) Parse the web page content using BeautifulSoup</span><restore-line-break>    soup = BeautifulSoup(response.content, <span class="hljs-string">"html.parser"</span>)<restore-line-break><restore-line-break>    <span class="hljs-comment"># (4) Create an Excel workbook with appropriate headers</span><restore-line-break>    wb = Workbook()<restore-line-break>    ws = wb.active<restore-line-break>    ws.title = <span class="hljs-string">"Load Times"</span><restore-line-break>    ws[<span class="hljs-string">"A1"</span>] = <span class="hljs-string">"Element"</span><restore-line-break>    ws[<span class="hljs-string">"B1"</span>] = <span class="hljs-string">"URL"</span><restore-line-break>    ws[<span class="hljs-string">"C1"</span>] = <span class="hljs-string">"Load Time (ms)"</span><restore-line-break>    ws[<span class="hljs-string">"D1"</span>] = <span class="hljs-string">"Size"</span><restore-line-break><restore-line-break>    <span class="hljs-comment"># (5) Iterate through the relevant HTML elements and write results to Excel file</span><restore-line-break>    <span class="hljs-comment"># ...</span><restore-line-break><restore-line-break>    <span class="hljs-comment"># Save the Excel workbook</span><restore-line-break>    wb.save(<span class="hljs-string">"load_times.xlsx"</span>)<restore-line-break>    print(<span class="hljs-string">"Loading times and sizes saved in load_times.xlsx"</span>)<restore-line-break></code></pre>
<p>The complete <code>load_times.py</code> script can be found <a target="_blank" href="https://gist.github.com/assistant/7d5ea5c5e5b34dd5f5c7f5b5e5b7eeb0" rel="noopener">here</a>.</p>
<h2 id="heading-writing-tests">Writing Tests</h2>
<p>For testing, we'll use Python's built-in <code>unittest</code> library. Inside the <code>tests</code> folder in the <code>web_load_times</code> project, create afile named <code>test_load_times.py</code>. This file will contain the test cases for our script.</p>
<p>First, import the required libraries and the <code>format_size</code> function from the <code>load_times</code> script:</p>
<pre><code class="lang-python"><span class="hljs-keyword">import</span> unittest<restore-line-break><span class="hljs-keyword">from</span> web_load_times.load_times <span class="hljs-keyword">import</span> format_size<restore-line-break></code></pre>
<p>Now, create a test case class <code>TestLoadTimes</code> that inherits from <code>unittest.TestCase</code>. We'll write a test for the <code>format_size</code> function to ensure it correctly formats file sizes:</p>
<pre><code class="lang-python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestLoadTimes</span>(<span class="hljs-params">unittest.TestCase</span>):</span><restore-line-break><restore-line-break>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">test_format_size</span>(<span class="hljs-params">self</span>):</span><restore-line-break>        self.assertEqual(format_size(<span class="hljs-number">123</span>), <span class="hljs-string">"123.00 B"</span>)<restore-line-break>        self.assertEqual(format_size(<span class="hljs-number">1234</span>), <span class="hljs-string">"1.21 KB"</span>)<restore-line-break>        self.assertEqual(format_size(<span class="hljs-number">1234567</span>), <span class="hljs-string">"1.18 MB"</span>)<restore-line-break></code></pre>
<p>To run the tests, execute the following command in the terminal:</p>
<pre><code class="lang-bash">poetry run python -m unittest<restore-line-break></code></pre>
<p>This will run the test suite and report the results.</p>
<h2 id="heading-conclusion">Conclusion</h2>
<p>In this article, we've learned how to create a Python script that analyzes web page load times and file sizes for CSS, JavaScript, and image files. We've used Poetry for dependency management and packaging, and written tests using the <code>unittest</code> library. This script can be a helpful tool for optimizing web page performance and understanding which resources have the most impact on load times.</p>


            
         </div>

            <footer class="wrapper post__footer">

                     <p class="post__last-updated">
                        This article was updated on
                           June 1, 2024
                     </p>


                     <div class="post__share">
                        
                        
                        
                        
                        
                        
                     </div>

                  <div class="post__bio bio">
                           <img 
                              src="https://itheo.tech/media/website/64.png" 
                               loading="lazy"
                              height="512"
                              width="512" 
                              class="bio__avatar" 
                              alt="Theo van der Sluijs">                          
                        <div>
                           <h3 class="bio__name">
                              <a href="https://itheo.tech/authors/theo-van-der-sluijs/" rel="author">Theo van der Sluijs</a>
                           </h3>
                        </div>
                  </div>
            </footer>
      </article>

            <nav class="post__nav">
               <div class="post__nav-inner">
                     <div class="post__nav-prev">
                        <svg width="1.041em" height="0.416em" aria-hidden="true">
                           <use xlink:href="https://itheo.tech/assets/svg/svg-map.svg#arrow-prev"/>
                        </svg>

                        <a href="https://itheo.tech/weerlive-api-python-script-om-weersgegevens-op-te-halen-en-te-verwerken.html" class="post__nav-link" rel="prev">
                           <span>Previous</span>
                           Weerlive API: Python-script om weersgegevens op te halen en te verwerken
                        </a>
                     </div>
                     <div class="post__nav-next">
                        <a href="https://itheo.tech/calculate-todays-moon-phase-using-python-ephem-and-unittest-a-comprehensive-guide.html" class="post__nav-link" rel="next">
                           <span>Next</span>
                           Calculate Today&#x27;s Moon Phase Using Python, ephem, and unittest - A Comprehensive Guide
                        </a>
                        <svg width="1.041em" height="0.416em" aria-hidden="true">
                           <use xlink:href="https://itheo.tech/assets/svg/svg-map.svg#arrow-next"/>
                        </svg>
                     </div>
               </div>
            </nav>

            <div class="post__related related">
               <div class="wrapper">
                  <h2 class="h5 related__title">
                     You should also read:
                  </h2>
                     <article class="related__item">
                        <div class="feed__meta">
                           <time datetime="2018-10-03T22:00" class="feed__date">
                                 October 3, 2018
                           </time>
                        </div>
                        <h3 class="h1">
                           <a href="https://itheo.tech/scraping-contact-data-with-python-export-to-csv.html">
                              Scraping contact data with Python export to csv
                           </a>
                        </h3>
                     </article>
                     <article class="related__item">
                        <div class="feed__meta">
                           <time datetime="2018-11-30T23:00" class="feed__date">
                                 November 30, 2018
                           </time>
                        </div>
                        <h3 class="h1">
                           <a href="https://itheo.tech/image-resize-python-automation-script.html">
                              Image resize python automation script
                           </a>
                        </h3>
                     </article>
                     <article class="related__item">
                        <div class="feed__meta">
                           <time datetime="2018-12-19T23:00" class="feed__date">
                                 December 19, 2018
                           </time>
                        </div>
                        <h3 class="h1">
                           <a href="https://itheo.tech/get-colors-from-images-python-script.html">
                              Get colors from images python script
                           </a>
                        </h3>
                     </article>
               </div>
            </div>



</main>
<footer class="footer">
        <div class="footer__copyright">
            <p>iTheo.Tech</p>
        </div>
        <button onclick="backToTopFunction()" id="backToTop" class="footer__bttop" aria-label="Back to top" title="Back to top">
            <svg>
                <use xlink:href="https://itheo.tech/assets/svg/svg-map.svg#toparrow"/>
            </svg>
        </button>

</footer>
</div>

<script defer src="https://itheo.tech/assets/js/scripts.min.js?v=f47c11534595205f20935f0db2a62a85"></script>

<script>window.publiiThemeMenuConfig={mobileMenuMode:'sidebar',animationSpeed:300,submenuWidth: 'auto',doubleClickTime:500,mobileMenuExpandableSubmenus:true,relatedContainerForOverlayMenuSelector:'.top'};</script>

    <script>        
        var images = document.querySelectorAll('img[loading]');
        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }
    </script>



</body>
</html>
